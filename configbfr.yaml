# ===================== CORE PORTS ===================== #
#port: 7890
#socks-port: 7891
#mixed-port: 7893
redir-port: 9797
tproxy-port: 9898
mode: rule
allow-lan: true
unified-delay: true
bind-address: '*'
log-level: silent
ipv6: false
# geodata-loader: memconservative

# ===================== API & UI ======================= #
external-controller: 0.0.0.0:9090          # REST API Clash/Mihomo
external-controller-cors:                  # izinkan akses dari dashboard mana pun
  allow-origins:
    - '*'
  allow-private-network: true              # untuk akses dari LAN juga
external-ui: /data/adb/box/clash/dashboard/
external-ui-url: "https://github.com/Zephyruso/zashboard/releases/latest/download/dist.zip"

# ===================== PROFILE ======================== #
profile:
  store-selected: true
  store-fake-ip: false

# ===================== SNIFFER ======================== #
sniffer:
  enable: true
  force-dns-mapping: true
  parse-pure-ip: true
  override-destination: true
  sniff:
    HTTP:
      ports: [80, 8080-8880]
      override-destination: true
    TLS:
      ports: [443, 8443]
    QUIC:
      ports: [443]               # umum 443; bisa tambah 8443 jika perlu
  # force-domain:
  #   - +.v2ex.com
  # skip-domain:
  #   - "+.push.apple.com"

# ===================== TUN (router: off) ============== #
tun:
  exclude-package: []
  enable: false
  device: utun
  mtu: 9000
  stack: system                  # gvisor / lwip / system
  dns-hijack:
    - any:53
    - tcp://any:53
  auto-route: true
  auto-detect-interface: true

# ===================== DNS ============================ #
dns:
  enable: true
  ipv6: false
  listen: 0.0.0.0:1053
  use-hosts: true
  enhanced-mode: fake-ip
  fake-ip-range: 198.18.0.1/16
  # tambahkan filter umum agar layanan tertentu tidak pakai fake-ip
  fake-ip-filter:
    - '*.lan'
    - '*.local'
    - 'ntp.*'
    - 'time.*'
    - 'connectivitycheck.gstatic.com'
    - '*.msftncsi.com'
    - '*.apple.com'
    - '*.push.apple.com'
  default-nameserver:
    - 1.1.1.1
    - 8.8.8.8
  nameserver:
    - 1.0.0.1
    - 8.8.4.4
  proxy-server-nameserver:        # upstream untuk kueri yang lewat proxy
    - 112.215.198.248 #XL
    - 112.215.198.254 #XL
    - 112.215.203.246 #XL
    - 112.215.203.247 #XL
    - 112.215.203.248 #XL
    - 112.215.203.254 #XL
  respect-rules: true

# ===================== PROXIES ======================== #
proxies: []                      # biarkan kosong; semua node dari providers

# ===================== GROUPS ========================= #
proxy-groups:
  - name: "Ãœğ–‡ğ–Šğ–—ğ–’ğ–Šğ–“ğ–˜ğ–ˆğ–"
    type: select
    disable-udp: false
    proxies:
      - "ğ’ğˆğğ†ğ€ğğğ‘ğ„"
      - "ğˆğğƒğğğ„ğ’ğˆğ€"
      - DIRECT
    url: http://www.gstatic.com/generate_204
    interval: 30

  - name: "ğ’ğˆğğ†ğ€ğğğ‘ğ„"
    type: fallback
    strategy: round-robin
    disable-udp: false
    use:
      - ID Edu
      - ID Zoom
      - SG Edu
    url: http://www.gstatic.com/generate_204
    interval: 30

  - name: "ğˆğğƒğğğ„ğ’ğˆğ€"
    type: fallback
    strategy: round-robin
    disable-udp: false
    use:
      - ID Nusa
    url: http://www.gstatic.com/generate_204
    interval: 30

# ===================== PROVIDERS ====================== #
proxy-providers:
  ID Edu:
    type: http
    url: "https://raw.githubusercontent.com/oranglemah/khusus/refs/heads/main/eduudp.txt"
    path: "./proxy_provider/ID EDU.yaml"   # cache lokal
    interval: 86400
    health-check:
      enable: true
      url: http://www.gstatic.com/generate_204
      interval: 300

  ID Zoom:
    type: http
    url: "https://raw.githubusercontent.com/oranglemah/khusus/refs/heads/main/eduwc.txt"
    path: "./proxy_provider/ID Zoom.yaml"
    interval: 86400
    health-check:
      enable: true
      url: http://www.gstatic.com/generate_204
      interval: 300

  SG Edu:
    type: http
    url: "https://raw.githubusercontent.com/oranglemah/khusus/refs/heads/main/edusg.txt"
    path: "./proxy_provider/SG Edu.yaml"
    interval: 86400
    health-check:
      enable: true
      url: http://www.gstatic.com/generate_204
      interval: 300

  ID Nusa:
    type: http
    url: "https://raw.githubusercontent.com/oranglemah/khusus/refs/heads/main/eduID.txt"
    path: "./proxy_provider/ID Nusa.yaml"
    interval: 86400
    health-check:
      enable: true
      url: http://www.gstatic.com/generate_204
      interval: 300

# ===================== RULES ========================== #
rules:
  - MATCH,Ãœğ–‡ğ–Šğ–—ğ–’ğ–Šğ–“ğ–˜ğ–ˆğ–
